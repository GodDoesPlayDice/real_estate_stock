<script>
(function(a){'use strict';let b={classes:"",dropdownOptions:{}};class c extends Component{constructor(b,d){super(c,b,d);this.$el.hasClass("browser-default")||(this.el.M_FormSelect=this,this.options=a.extend({},c.defaults,d),this.isMultiple=this.$el.prop("multiple"),this.el.tabIndex=-1,this._keysSelected={},this._valueDict={},this._setupDropdown(),this._setupEventHandlers())}static get defaults(){return b}static init(a,b){return super.init(this,a,b)}static getInstance(a){let b=!a.jquery?a:a[0];return b.M_FormSelect}destroy(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}_setupEventHandlers(){this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),a(this.dropdownOptions).find("li:not(.optgroup)").each(a=>{a.addEventListener("click",this._handleOptionClickBound)}),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}_removeEventHandlers(){a(this.dropdownOptions).find("li:not(.optgroup)").each(a=>{a.removeEventListener("click",this._handleOptionClickBound)}),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}_handleSelectChange(){this._setValueToInput()}_handleOptionClick(b){b.preventDefault();let c=a(b.target).closest("li")[0];this._selectOption(c),b.stopPropagation()}_selectOption(b){let c=b.id;if(!a(b).hasClass("disabled")&&!a(b).hasClass("optgroup")&&c.length){let d=!0;if(this.isMultiple){let b=a(this.dropdownOptions).find("li.disabled.selected");b.length&&(b.removeClass("selected"),b.find("input[type=\"checkbox\"]").prop("checked",!1),this._toggleEntryFromArray(b[0].id)),d=this._toggleEntryFromArray(c)}else a(this.dropdownOptions).find("li").removeClass("selected"),a(b).toggleClass("selected",d),this._keysSelected={},this._keysSelected[b.id]=!0;let e=a(this._valueDict[c].el).prop("selected");e!==d&&(a(this._valueDict[c].el).prop("selected",d),this.$el.trigger("change"))}this.isMultiple||this.dropdown.close()}_handleInputClick(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}_setupDropdown(){this.wrapper=document.createElement("div"),a(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(a(this.wrapper));let b=a("<div class=\"hide-select\"></div>");a(this.wrapper).append(b),b[0].appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id=`select-options-${M.guid()}`,a(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each(b=>{if(a(b).is("option")){let a;a=this.isMultiple?this._appendOptionWithIcon(this.$el,b,"multiple"):this._appendOptionWithIcon(this.$el,b),this._addOptionToValueDict(b,a)}else if(a(b).is("optgroup")){let c=a(b).children("option");a(this.dropdownOptions).append(a("<li class=\"optgroup\"><span>"+b.getAttribute("label")+"</span></li>")[0]),c.each(a=>{let b=this._appendOptionWithIcon(this.$el,a,"optgroup-option");this._addOptionToValueDict(a,b)})}}),a(this.wrapper).append(this.dropdownOptions),this.input=document.createElement("input"),a(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&a(this.input).prop("disabled","true"),a(this.wrapper).prepend(this.input),this._setValueToInput();let c=a("<svg class=\"caret\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M7 10l5 5 5-5z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>");if(a(this.wrapper).prepend(c[0]),!this.el.disabled){let b=a.extend({},this.options.dropdownOptions),c=b.onOpenEnd;b.onOpenEnd=()=>{let b=a(this.dropdownOptions).find(".selected").first();if(b.length&&(M.keyDown=!0,this.dropdown.focusedIndex=b.index(),this.dropdown._focusFocusedItem(),M.keyDown=!1,this.dropdown.isScrollable)){let a=b[0].getBoundingClientRect().top-this.dropdownOptions.getBoundingClientRect().top;a-=this.dropdownOptions.clientHeight/2,this.dropdownOptions.scrollTop=a}c&&"function"==typeof c&&c.call(this.dropdown,this.el)},b.closeOnClick=!1,this.dropdown=M.Dropdown.init(this.input,b)}this._setSelectedStates()}_addOptionToValueDict(a,b){let c=Object.keys(this._valueDict).length,d=this.dropdownOptions.id+c,e={};b.id=d,e.el=a,e.optionEl=b,this._valueDict[d]=e}_removeDropdown(){a(this.wrapper).find(".caret").remove(),a(this.input).remove(),a(this.dropdownOptions).remove(),a(this.wrapper).before(this.$el),a(this.wrapper).remove()}_appendOptionWithIcon(b,c,d){let e=c.disabled?"disabled ":"",f="optgroup-option"===d?"optgroup-option ":"",g=this.isMultiple?`<label><input type="checkbox"${e}"/><span>${c.innerHTML}</span></label>`:c.innerHTML,h=a("<li></li>"),i=a("<span></span>");i.html(g),h.addClass(`${e} ${f}`),h.append(i);let j=c.getAttribute("data-icon");if(!!j){let b=a(`<img alt="" src="${j}">`);h.prepend(b)}return a(this.dropdownOptions).append(h[0]),h[0]}_toggleEntryFromArray(b){let c=!this._keysSelected.hasOwnProperty(b),d=a(this._valueDict[b].optionEl);return c?this._keysSelected[b]=!0:delete this._keysSelected[b],d.toggleClass("selected",c),d.find("input[type=\"checkbox\"]").prop("checked",c),d.prop("selected",c),c}_setValueToInput(){let b=[],c=this.$el.find("option");if(c.each(c=>{if(a(c).prop("selected")){let d=a(c).text();b.push(d)}}),!b.length){let a=this.$el.find("option:disabled").eq(0);a.length&&""===a[0].value&&b.push(a.text())}this.input.value=b.join(", ")}_setSelectedStates(){for(let b in this._keysSelected={},this._valueDict){let c=this._valueDict[b],d=a(c.el).prop("selected");a(c.optionEl).find("input[type=\"checkbox\"]").prop("checked",d),d?(this._activateOption(a(this.dropdownOptions),a(c.optionEl)),this._keysSelected[b]=!0):a(c.optionEl).removeClass("selected")}}_activateOption(b,c){if(c){this.isMultiple||b.find("li.selected").removeClass("selected");let d=a(c);d.addClass("selected")}}getSelectedValues(){let a=[];for(let b in this._keysSelected)a.push(this._valueDict[b].el.value);return a}}M.FormSelect=c,M.jQueryLoaded&&M.initializeJqueryWrapper(c,"formSelect","M_FormSelect")})(cash);
</script>